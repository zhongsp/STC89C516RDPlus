C51 COMPILER V9.60.0.0   MAIN                                                              06/27/2022 11:56:00 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE User\main.c OPTIMIZE(8,SPEED) INCDIR(.\App;.\Public) DEBUG OBJECTEXTEND 
                    -PRINT(.\Listings\main.lst) OBJECT(main.obj)

line level    source

   1          /********************************************************************
   2          ******************
   3          实验名称：I2C-EEPROM 实验
   4          接线说明：
   5          实验现象：下载程序后，数码管右4 位显示0，按K1 键将数据写入到EEPROM 内保存，
   6          按K2 键读取EEPROM 内保存的数据，按K3 键显示数据加1，按K4 键显示数据清
   7          零，
   8          最大能写入的数据是255。
   9          注意事项：
  10          *********************************************************************
  11          ******************/
  12          #include "public.h"
  13          #include "24c02.h"
  14          #include "key.h"
  15          #include "smg.h"
  16          #define EEPROM_ADDRESS 0 //定义数据存入EEPROM 的起始地址
  17          /********************************************************************
  18          ***********
  19          * 函数名: main
  20          * 函数功能: 主函数
  21          * 输入: 无
  22          * 输出: 无
  23          *********************************************************************
  24          **********/
  25          void main()
  26          {
  27   1          u8 key_temp = 0;
  28   1          u8 save_value = 0;
  29   1          u8 save_buf[3];
  30   1          while (1)
  31   1          {
  32   2              key_temp = key_scan(0);
  33   2              if (key_temp == KEY1_PRESS)
  34   2              {
  35   3                  at24c02_write_one_byte(EEPROM_ADDRESS, save_value);
  36   3              }
  37   2              else if (key_temp == KEY2_PRESS)
  38   2              {
  39   3                  save_value = at24c02_read_one_byte(EEPROM_ADDRESS);
  40   3              }
  41   2              else if (key_temp == KEY3_PRESS)
  42   2              {
  43   3                  save_value++;
  44   3                  if (save_value == 255)
  45   3                      save_value = 255;
  46   3              }
  47   2              else if (key_temp == KEY4_PRESS)
  48   2              {
  49   3                  save_value = 0;
  50   3              }
  51   2              save_buf[0] = save_value / 100;
  52   2              save_buf[1] = save_value % 100 / 10;
  53   2              save_buf[2] = save_value % 100 % 10;
  54   2              smg_display(save_buf, 6);
C51 COMPILER V9.60.0.0   MAIN                                                              06/27/2022 11:56:00 PAGE 2   

  55   2          }
  56   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    112    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
