#ifndef _iic_H
#define _iic_H

#include "public.h"

sbit IIC_SCL = P2^1;
sbit IIC_SDA = P2^0;

/********************************************************************
***********
* 函数名: iic_start
* 函数功能: 产生IIC 起始信号
* 输入: 无
* 输出: 无
*********************************************************************
**********/
void iic_start(void);

/********************************************************************
***********
* 函数名: iic_stop
* 函数功能: 产生IIC 停止信号
* 输入: 无
* 输出: 无
*********************************************************************
**********/
void iic_stop(void);

/********************************************************************
***********
* 函数名: iic_ack
* 函数功能: 产生ACK 应答
* 输入: 无
* 输出: 无
*********************************************************************
**********/
void iic_ack(void);

/********************************************************************
***********
* 函数名: iic_nack
* 函数功能: 产生NACK 非应答
* 输入: 无
* 输出: 无
*********************************************************************
**********/
void iic_nack(void);

/********************************************************************
***********
* 函数名: iic_wait_ack
* 函数功能: 等待应答信号到来
* 输入: 无
* 输出: 1，接收应答失败
0，接收应答成功
*********************************************************************
**********/
u8 iic_wait_ack(void);

/********************************************************************
***********
* 函数名: iic_write_byte
* 函数功能: IIC 发送一个字节
* 输入: dat：发送一个字节
* 输出: 无
*********************************************************************
**********/
void iic_write_byte(u8 dat);

/********************************************************************
***********
* 函数名: iic_read_byte
* 函数功能: IIC 读一个字节
* 输入: ack=1 时，发送ACK，ack=0，发送nACK
* 输出: 应答或非应答
*********************************************************************
**********/
u8 iic_read_byte(u8 ack);

#endif
